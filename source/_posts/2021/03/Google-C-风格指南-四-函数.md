---
title: Google C++风格指南(四)——函数
date: 2021-03-25 20:35:17
tags:
- C++编码规范
categories:
- C++
---

# 参数顺序
输入参数在前，输出参数在后。

# 简短函数
优先编写简短函数，若行数超过四十行考虑分离。

# 引用参数
引用必须用`const`，对变量进行修改传指针。除非特殊要求，如`swap()`。

# 函数重载
函数重载尽量能够简单明了，尽量不要改变相同数量的参数类型来进行重载。可以考虑在函数名中加入类型信息。

# 缺省参数
只允许在非虚函数中使用缺省参数，尽可能使用函数重载而非缺省参数。

优点：
- 降低代码量，降低代码修改时的工作量，函数重载需要修改多个函数。

缺点：
- 虚函数调用的缺省参数取决于目标对象的静态类型，无法保证给定函数的所有重载声明的都是同样的缺省参数。
- 缺省参数会干扰函数指针，导致函数签名与调用点签名不一致。
- 缺省参数每次调用都需要重新求值,导致生成的代码膨胀。

# 函数返回类型后置语法
只有常规写法不便于书写或阅读时才使用返回类型后置语法。
```c++
int foo(int x);
auto foo(int x) -> int;
```
优点：
- 后置返回类型是显示指定Lambda表达式返回值类型的唯一方式，通常情况下编译器能够自动推导出Lambda表达式的返回类型，但并不是所有情况。

缺点：
- 陌生，与原始代码看起来不协调（黑人问号？）




